#!/bin/bash
cat <<EOF > /root/help.txt
Use "curl -o result.txt <URL>" or another method to call your HTTP function and store the result in a file called "result.txt"

Note: You can get your function's URL with the "gcloud functions describe" command, and use jq to parse the JSON

EOF

U=$(gcloud functions list --format json | jq -r '.[0] | .httpsTrigger.url')
ENDPOINT=$(gcloud functions list --format json | jq -r '.[0] | .entryPoint')

cat <<EOF > /root/hint.txt

The function you want to call is called $ENDPOINT

You can get more details about this function, including the url, by running this command:
gcloud functions describe $ENDPOINT

You can parse the URL from this response by using the JSON output format with jq

gcloud functions list --format json | jq -r '.[0] | .httpsTrigger.url'

This will reuturn the URL which you can use:
$U

This has been saved as an environment variable called URL

EOF

cat <<EOF > /root/.customenv
URL=$U
EOF

set-workdir /home